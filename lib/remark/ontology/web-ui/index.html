<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>Spry Graph Viewer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="./index.css" />
</head>

<body>
  <header>
    <h1>Spry Graph Viewer</h1>
    <div id="header-controls">
      <label for="document-select">Document:</label>
      <select id="document-select"></select>
    </div>
  </header>

  <main id="layout-grid">
    <!-- Left: documents + relationships -->
    <aside id="sidebar-panel">
      <section id="documents-panel">
        <h2>Documents</h2>
        <ul id="document-list"></ul>
      </section>

      <section id="relationships-panel">
        <h2>Relationships</h2>
        <div id="relationship-mode-hint">
          Hierarchical view for structural relationships; table view for
          others.
        </div>
        <ul id="relationship-list"></ul>
      </section>
    </aside>

    <!-- Center: relationship view (tree or table) -->
    <section id="relationship-view-panel">
      <div id="relationship-view-header">
        <h2 id="relationship-title"></h2>
        <div id="relationship-meta"></div>

        <!-- Node-type filters for hierarchical view -->
        <div id="node-type-filter"></div>
      </div>

      <!-- Hierarchical tree view -->
      <div id="hierarchy-view">
        <ul id="hierarchy-root" class="tree-root"></ul>
      </div>

      <!-- Edge table view (non-hierarchical rels) -->
      <div id="edge-table-view">
        <table id="edge-table">
          <thead>
            <tr>
              <th>From</th>
              <th>To</th>
              <th>From label</th>
              <th>To label</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <!-- Draggable resizer between center and right -->
    <div id="center-right-resizer" aria-hidden="true"></div>

    <!-- Right: node details -->
    <aside id="details-panel">
      <section id="node-details">
        <h2>Node details</h2>
        <dl>
          <dt>Node id</dt>
          <dd id="node-id"></dd>

          <dt>Node type</dt>
          <dd id="node-type"></dd>

          <dt>Label</dt>
          <dd id="node-label"></dd>

          <dt>Relationships</dt>
          <dd id="node-rels"></dd>

          <dt>Path</dt>
          <dd id="node-path"></dd>
        </dl>
      </section>

      <section id="node-mdast">
        <h2>mdast node (JSON)</h2>
        <pre id="node-mdast-json" class="code-block"></pre>
      </section>

      <section id="node-source">
        <h2>Source code / text</h2>
        <pre id="node-source-code" class="code-block"></pre>
      </section>
    </aside>
  </main>

  <footer>
    <span id="footer-left">© <span id="footer-year">2025</span></span>
    <span id="footer-right">Spry Programmable Markdown ·
      <span id="footer-version">0.1.0</span></span>
  </footer>

  <!-- Model injection (filled by Deno server) -->
  <script type="application/json" id="web-ui.model.json"></script>

  <!-- App -->
  <script type="module" src="./index.js"></script>
</body>

</html>